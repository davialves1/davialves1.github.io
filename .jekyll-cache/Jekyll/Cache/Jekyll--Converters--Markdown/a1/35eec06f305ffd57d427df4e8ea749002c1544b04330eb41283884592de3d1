I"~<p><strong>author</strong> : Kunal Hire</p>

<p>I explained how to build the React-Redux application using Test Driven Development(TDD) in my earlier blog here. However, I did not cover the TDD part for React-Routes in that bog. If your application is missing the tests for routes or if you want to learn how to build it using TDD then this blog is for you.
Background: I was pairing with one of the backend developers on a React-Redux application. We had very good test coverage as the whole application was built using TDD. However, when we wanted to add a new page, I did not start with tests as testing routes was a little bit complex and was simply omitted in the front-end development community. My fellow developer had a valid argument that the routes are the most important part of a Single Page Application(SPA) hence they must be built using TDD. As a result of which we came up with the following approach.
Code in Action:
What should be tested in React Routes? In a typical multi-route React application, the routes are defined in a separate file and wrapped in a bunch of providers. First of all, we should decouple the providers and have routes(<Switch>) element in a different component. A typical react routes elements look like this-</Switch></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">it</span><span class="p">(</span><span class="dl">'</span><span class="s1">should dispatch an action to fetch the leaves</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">done</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">api</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="s2">`/leaves`</span><span class="p">).</span><span class="nx">reply</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="p">[</span><span class="nx">leaveFormStub</span><span class="p">]);</span>

    <span class="nx">store</span><span class="p">.</span><span class="nx">dispatch</span><span class="p">(</span><span class="nx">leavesActions</span><span class="p">.</span><span class="nx">fetchLeaves</span><span class="p">())</span>
        <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">resp</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="nx">request</span><span class="p">.</span><span class="nx">done</span><span class="p">();</span>
            <span class="kd">let</span> <span class="nx">executedActions</span> <span class="o">=</span> <span class="nx">store</span><span class="p">.</span><span class="nx">getActions</span><span class="p">();</span>
            <span class="nx">expect</span><span class="p">(</span><span class="nx">executedActions</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">type</span><span class="p">).</span><span class="nx">to</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="nx">constants</span><span class="p">.</span><span class="nx">LEAVE_FETCHING</span><span class="p">);</span>
            <span class="nx">expect</span><span class="p">(</span><span class="nx">executedActions</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nx">type</span><span class="p">).</span><span class="nx">to</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="nx">constants</span><span class="p">.</span><span class="nx">LEAVES_FETCHED</span><span class="p">);</span>
            <span class="nx">expect</span><span class="p">(</span><span class="nx">executedActions</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nx">leaves</span><span class="p">).</span><span class="nx">to</span><span class="p">.</span><span class="nx">deep</span><span class="p">.</span><span class="nx">equal</span><span class="p">([</span><span class="nx">leaveFormStub</span><span class="p">]);</span>
            <span class="nx">done</span><span class="p">();</span>
        <span class="p">})</span>
        <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">done</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div></div>

<p>It is important to test “hey route, which component(page) will you render on this path?”
In the above code snippet, the ProfileContainer page is rendered when the application route changes to paths.EDIT_PROFILE which is /:userId. Therefore it is important to test if the route is rendered with correctpath and component property.
The Test Case:
Here is the test case for the above route-
it(‘should render the route for edit profile’, function () { const routes = wrapper.find(‘Switch’); const editRoute = routes.childAt(1); expect(editRoute.prop(“path”)).toEqual(paths.EDIT_PROFILE); expect(editRoute.prop(“component”)).toEqual(ProfileContainer); });</p>

:ET